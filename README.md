# Моделирование электрических цепей
Моделирование электрических цепей модифицированным методом узловых потенциалов.

## Пользовательская документация
Окно программы состоит из сетки, на которой создается электрическая цепь, и кнопки "Count", запускающей расчет цепи. Кнопка активна, если она красного цвета и синяя в неактивном состоянии. Кнопка становится активной (расчет возможен) при выполнении следующих условий:

1. Цепь замкнутая
2. В цепи есть по крайней мере один конденсатор
3. В цепи есть по крайней мере одна катушка индуктивности

Для добавления в цепь элемента достаточно нажать левой кнопкой мыши на одну из линий сетки. Изначально все ее линии серые (неактивные). При однократном нажатии линия становится резистором, при двукратном - конденсатором, при трехкратноми - катушкой индуктивности. Для настройки значения элемента цепи необходимо щелкнуть по элементу правой кнопкой мыши, при этом появится окно ввода значения. После ввода необходимо нажать Enter. Значения по умолчанию:

1. Сопротивление резистора = 1мОм
2. Емкость конденсатора = 1 Ф
3. Индуктивности катушки = 1 Гн

При нажатии кнопки "Count" левой кнопкой мыши на экран будут выведены графики зависимости силы тока для каждой из катушек в цепи  от времени. При этом каждая катушка в цепи окрасится в тот же цвет, что и соответсвующий ей график.

Расчет производится [модифицированным методом узловых потенциалов](https://ieeexplore.ieee.org/ielx5/31/23445/01084079.pdf?tp=&arnumber=1084079&isnumber=23445) при следующих начальных условиях:

1. Начальное напряжение на каждом из конденсаторов = 1 В
2. Начальный ток через каждую катушку индуктивности = 0 А

## Техническая документация
Были использованы следующие библиотеки:
1. Pygame – набор модулей для написания мультимедиа-приложений
2. Numpy – библиотека с широким набором математических функций для работы с массивами
3. Matplotlib – библиотека для визуализации данных двумерной графикой (построения графиков)

- game_object.py

Класс GameObject предназначен для реализации основных объектов программы и их контейнеров

- line.py

Класс Line реализует основные элементы цепи: конденсаторы, резисторы и катушки индуктивности. Свойства: mode – режим (0 – элемент не активен, 2 – резистор, 3 – конденсатор, 4 – катушка индуктивности), x, y – координаты на сетке верхнего левого конца элемента, l – его длина, orient – ориентация (hor – горизонтальная, vert – вертикальная), value – значение сопротивления/емкости/индуктивности, prev – текущее значение напряжения на конденсаторе/силы тока через катушку, col – цвет (для катушки)

Процедура draw осуществляет отрисовку элемента на сетке

Процедура update осуществляет обработку нажатий на элемент и последующее изменение его режима (при нажатии левой кнопкой мыши) или значения (при нажатии правой кнопкой мыши)

- input_box.py

Класс InputBox реализует окно для ввода значения для элемента цепи. Свойства: x, y – координаты окна, font_name – название шрифта, maxlength – максимальная длина ввода, value – значение, name – название, unit – единица измерения.

Процедура draw осуществляет отрисовку окна.

Процедура update считывает значение ввода и контролирует максимальную длину ввода.

- button.py

Класс Button реализует кнопку “Count”. Свойства: x, y – координаты левого верхнего угла, w – ширина, h – высота, color – цвет (активность кнопки), font – шрифт

Процедура draw осуществляет отрисовку кнопки

Процедура update обрабатывает нажатие на кнопку и определяет по текущему состоянию сетки активна ли она

- count.py

Функция color определяет по текущему состоянию сетки, возможен ли обсчет цепи и возвращает соответствующий цвет кнопки (синий, если обсчет невозможен и красный, если возможен)

Процедура count обсчитывает цепь и выводит график зависимости тока на каждой катушке от времени. Для этого: находятся все узлы в цепи и выкидывается один из (его потенциал принимаем равным нулю). Находятся все катушки (outputs). Для каждого момента времени строится расширенная матрица узловых потенциалов, решается соответствующая ей система линейных уравнений. По решениям производится обновление текущих значений напряжений на конденсаторах и токов через катушки. Строятся графики для каждой катушки индуктивности.

- test.py

Создается окно программы, отрисовывается базовая сетка. В основном цикле происходит обработка всех нажатий и соответствующее обновление объектов программы.
